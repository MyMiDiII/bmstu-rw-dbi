\chapter{Анализ предметной области}

\section{Основные определения}

\textit{Индекс} --- это некоторая структура, обеспечивающая быстрый поиск
записей в базе данных~\cite{amur}. Индекс определяет соответствие значения
аттрибута или набора аттрибутов --- \textit{ключа поиска} --- конкретной
записи с местоположением этой записи~\cite{ship}. Это соответствие организуется
с помощью индексных записей. Каждая из них соответствует записи в
\textit{индексируемой таблице} --- таблице, по которой строится индекс --- и
содержит два поля: идентификатор записи или указатель на нее, а также значение
индексированного поля в этой записи~\cite{syore}.

Индексы могут использоваться для поиска по конкретному значению или диапазону
значений, а также для проверки существования элемента в таблице, однако
обеспечение уменьшения времени доступа к записям в общем случае достигается за
счет~\cite{ship}:
\begin{itemize}
    \item упорядочивания индексных записей по ключу поиска, что уменьшает
        количество записей, которые необходимо просмотреть;
    \item а также меньшего размера индекса по сравнению с индексируемой
        таблицей, сокращающего время чтения одного элемента.
\end{itemize}

В то же время индекс явлется структурой, которая строится в дополнение к
существующим данным, то есть он занимает дополнительный объем памяти и должен
соответствовать текущим данным.  Последнее значит, что индекс необходимо
изменять при вставке или удалении элементов, на что затрачивается время, поэтому
индекс, ускоряя работу СУБД при доступе к данным, замедляет операции изменения
таблицы, что необходимо учитывать\cite{osip}.

Таким образом, индекс может описываться:~\cite{ship}:
\begin{itemize}
    \item \textit{типом доступа} --- поиск записей по аттрибуту с конкретным
        значением, или со значением из указанного диапазона;
    \item \textit{временем доступа} --- время поиска записи или записей;
    \item \textit{временем вставки}, включающее время поиска правильного места вставки, а
        также время для обновления индекса;
    \item \textit{временем удаления}, аналогично вставке, включающее время на поиск
        удаляемого элемента и время для обновления индекса;
    \item \textit{дополнительной памятью}, занимаемая индексной стркутурой.
\end{itemize}

\section{Типы индексов}

Типы индексов выделяют по нескольким признаками. По \textit{типу ключа поиска}
индексы делятся на: 
    \begin{itemize}
        \item первичные --- по первичному ключу ???,
        \item вторичные --- по всем остальным аттрибутам;
    \end{itemize}

По порядку записей в индексируемой таблице индексы делятся на кластеризованные и
некластеризованные.  В \textit{кластеризованных} индексах логический порядок
ключей определяет физическое расположение записей, а так как строки в таблице
могут быть упорядочены только в одном порядке, то кластеризованный индекс может
быть только один на таблицу. Логический порядок \textit{некластеризованных}
индексов не влияет на физический, и индекс содержит указатели на записи
таблицы.

Также индексы делятся на плотные и разрженные. Плотные индексы содержат ключ
поиска и указатель на первую запись с заданным ключом поиска. При этом в
кластеризованных индексах другие записи с заданным ключом будут лежать сразу после
первой записи, так как записи в таких файлах отсортированны по тому же ключу.
Плотные некластеризованные индексы должны содержать список указателей на каждую
запись с заданным ключом поиска.(рисунок~\ref{img:dense}).
 
\imgs{dense}{h!}{0.4}{Плотный индекс}

В разреженных индексах записи содержат только некоторые значения ключа поиска, а
для доступа к элементу отношения ищется запись индекса с наибольшим меньшим или
равным значением ключа поиска, происходит переход по указателю на первую запись
по найденному ключу и далее по указателям в файле происходит поиск заданной
записи. Таким образом, разреженные индексы могут быть построены только на
отсортированных последовательностях записей, иначе хранения только некоторых
ключей поиска будет недостаточно, так как будет неизвестно, после записи, с
каким ключом будет лежать необходимый элемент отношения.
(рисунок~\ref{img:sparse});

\imgs{sparse}{h!}{0.4}{Разреженный индекс}

Поиск с помощью неразреженных индексов быстрее, так как указатель в записи
индекса сразу приводит к необходимым записям. Однако разреженные индексы требуют
меньше дополнительной памяти и сокращают время поддержания структуры индекса в
актуальном состоянии при вставке или удалении.

По количеству уровней:
\begin{itemize}
    \item одноуровневые ... (рисунок~\ref{img:onelevel}),
    \item многоуровневые ... (рисунок~\ref{img:multilevel});
\end{itemize}

По структуре индексы подразделяются на
\begin{itemize}
    \item упорядоченные, на основе деревьев поиска,
    \item хеш-индексы,
    \item индексы, на основе битовых карт.
\end{itemize}

Построение структур каждого из приведенных типов индекса рассматривается в
отдельном разделе, так как именно оно исследуется в данной работе.

